#include "HardwareModules/HardwareRegistry.h"
#include "HardwareModules/OLEDScreen.h"
#include "HardwareModules/LEDDigitalScreen.h"
#include "Models/PresentingWeatherData.h"
#include "Models/PresentingBackendWeatherData.h"
#include "Models/Enums/NetworkStatus.h"
#include "Models/Enums/View.h"
#include "GlobalObjects/GlobalState.h"

class ScreenController
{
public:
    ScreenController(HardwareRegistry* hardwareRegistry, GlobalState* globalState);
    void clearScreen();
    void clearLedScreens();
    void showDataScreen(View view, PresentingWeatherData weatherData, bool isOledActive);
    void showDataScreen(View view, PresentingBackendWeatherData backendWeatherData, bool isOledActive);    
    void showNetworkStatusIcon(NetworkStatus status);
    void showInfoScreen(String title, String text);

    void showRadiationGraph(PresentingWeatherData weatherData);

    void setLedScreensBrightness(int percent);
    void blinkRadiation();

private:
    OLEDScreen* _screenDevice;
    Adafruit_SSD1306* _screen;

    TM1637LED* _ledScreenTop;
    TM1637LED* _ledScreenMiddle;
    TM1637LED* _ledScreenBottom;

    GlobalState* _globalState;

    void showMeasurementUnit(String measurement, String unit);

    uint16_t _iconWidth = 32;
    uint16_t _iconHeight = 32;
};

static const unsigned char PROGMEM wifi_icon[] = {
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3f, 0xfe, 0x00, 0x01, 0xff, 0xff, 0xc0, 
    0x07, 0xff, 0xff, 0xf0, 0x0f, 0xff, 0xff, 0xf8, 0x3f, 0xe0, 0x03, 0xfc, 0x7f, 0x00, 0x00, 0x7f, 
    0x3c, 0x00, 0x00, 0x1e, 0x18, 0x0f, 0xf8, 0x0c, 0x00, 0x7f, 0xff, 0x00, 0x00, 0xff, 0xff, 0x80, 
    0x01, 0xff, 0xff, 0xc0, 0x01, 0xf8, 0x0f, 0xc0, 0x00, 0xe0, 0x03, 0x80, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x03, 0xe0, 0x00, 0x00, 0x0f, 0xf8, 0x00, 0x00, 0x0f, 0xf8, 0x00, 0x00, 0x07, 0xf0, 0x00, 
    0x00, 0x03, 0xe0, 0x00, 0x00, 0x01, 0xc0, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};


static const unsigned char PROGMEM wifiError_icon[] = {
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x0c, 0x00, 0x00, 0x00, 0x0e, 0x00, 0x00, 0x00, 0x07, 0x00, 0x00, 0x00, 0x03, 0x87, 0xf8, 0x00, 
	0x01, 0xc3, 0xff, 0x00, 0x03, 0xe1, 0xff, 0xc0, 0x0f, 0xf0, 0xff, 0xf0, 0x1f, 0xf8, 0x07, 0xf8, 
	0x3f, 0x1c, 0x00, 0xfc, 0x1c, 0x0e, 0x00, 0x38, 0x08, 0x1f, 0x08, 0x10, 0x00, 0x7f, 0x86, 0x00, 
	0x01, 0xff, 0xc3, 0x80, 0x01, 0xfc, 0xe1, 0x80, 0x00, 0xe0, 0x70, 0x00, 0x00, 0x00, 0x38, 0x00, 
	0x00, 0x03, 0xfc, 0x00, 0x00, 0x0f, 0xfe, 0x00, 0x00, 0x0f, 0xf7, 0x00, 0x00, 0x07, 0xe3, 0x80, 
	0x00, 0x03, 0xc1, 0xc0, 0x00, 0x01, 0x80, 0xe0, 0x00, 0x00, 0x00, 0x70, 0x00, 0x00, 0x00, 0x30, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};;